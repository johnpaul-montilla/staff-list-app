
<hr>
<div>
  
<div class="row" style="background: #d4d7dd">
  <div class="col-4">
    <%= image_tag(@employee.profile_picture, {:style => "width:300px;"})%>
  </div>
  <div class="col-6">
    <br/><br/>
    <br/><br/>
    <div class="card border-primary mb-3" style="max-width: 50rem;">
      <div class="card-header">BASIC INFORMATION</div>
      <div class="card-body">
        <h5><span style="color: green">Name: </span><%= @employee.name %></h5>
        <h5><span style="color: green">Email: </span><%= @employee.email %></h5>
        <h5><span style="color: green">Role: </span><%= @employee.role %></h5>
        <% if current_employee.name == @employee.name %>
          <a href="#" class="card-text">Edit Basic Information</a>
        <% end %>
      </div>
    </div>
  </div>
</div>

<hr>

<div style="padding: 20px">
  <h3>ASSIGNED EQUIPMENTS</h3>
  <% @employee.material.each do|material| %>
  <label style="font-size: 2rem"><span class="badge badge-info"><%= material.name %></span></label>
  <% end%>
</div>

<hr>

<div style="padding: 20px" >
  <h3>QUESTIONS</h3>
  <% if flash[:errors] %>
    <% flash[:errors].each do |e|%>
      <p class="alert alert-danger"><%= e %></p>
    <% end %>
  <% end %>
  <% if flash[:success] %>
      <p class="alert alert-success"><%= flash[:success] %></p>
  <% end %>

  <table class="table table-striped">
    <thead>
      <tr>
        <th scope="col"></th>
        <th scope="col">Answer</th>
        <% if current_employee.id == @employee.id%>
          <th scope="col">Action</th>
        <% end %>
      </tr>
    </thead>
    <tbody>
      <% @questions.each do |question|%>
        <tr>
          <td><%= question.question %></td>
          <td>
            <% if question.answer != [] and question.answer.where(employee_id: @employee.id).pluck(:answer) != []%>
              <p><%= question.answer.where(employee_id: @employee.id).pluck(:answer).first%></p>
            <% else %>
              <span class="badge badge-danger">Unanswered</span>
            <% end %>
          </td> 
          <% if current_employee.id == @employee.id%>
            <td>
              <% if question.answer != [] and question.answer.where(employee_id: @employee.id).pluck(:answer) != []%>
                <button class=" btn btn-success btn-sm">Edit Answer</button>
                <%= link_to 'Delete Answer', delete_answer_path(question.answer.where(employee_id: @employee.id).pluck(:id)), data: {:confirm => 'Are you sure?'}, :method => :delete , :class => 'btn btn-danger btn-sm'%>
              <% else%>
                <%= link_to 'Answer Question', answer_create_path(question.id), :class => 'btn btn-primary btn-sm'%>
              <% end %>
            </td>
          <% end %> 
        </tr>
      <% end %>





    </tbody>
  </table>
</div>
<hr>


